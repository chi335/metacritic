## ğŸ® ê²Œì„ ë¦¬ë·° ì›¹ì‚¬ì´íŠ¸ í”„ë¡œì íŠ¸ - reactproject

ê²Œì„ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‚¬ìš©ìë“¤ì´ ë¦¬ë·°ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
í”„ë¡ íŠ¸ì—”ë“œëŠ” React, ë°±ì—”ë“œëŠ” PHP + MySQLë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ê°„ë‹¨í•œ ë¡œê·¸ì¸ ê¸°ëŠ¥ê³¼ ë¦¬ë·° CRUD ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```php
reactproject/

â”œâ”€â”€ frontend/       # React ê¸°ë°˜ í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ pages/        # í˜ì´ì§€ë³„ ë¼ìš°íŒ… êµ¬ì„±
â”‚   â”‚   â””â”€â”€ App.jsx       # ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ public/           # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚   â””â”€â”€ build/            # ë¹Œë“œ ê²°ê³¼ë¬¼
â”œâ”€â”€ backend/        # PHP ê¸°ë°˜ ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ api/        # API ì—”ë“œí¬ì¸íŠ¸ (ê²Œì„/ìœ ì €/ë¦¬ë·° ì²˜ë¦¬)
â”‚   â”œâ”€â”€ db_connect.php    # DB ì—°ê²°
â”‚   â””â”€â”€ static/     # ì •ì  CSS ë¦¬ì†ŒìŠ¤
```
## âœ¨ ì£¼ìš” ê¸°ëŠ¥
---
- ğŸ” ê²Œì„ ëª©ë¡ ì¡°íšŒ

- ğŸ“‹ ê²Œì„ ìƒì„¸ ì •ë³´ ë³´ê¸°

- âœ ë¦¬ë·° ì‘ì„± ë° ì¡°íšŒ

- ğŸ‘¤ ì‚¬ìš©ì íšŒì›ê°€ì… ë° ë¡œê·¸ì¸

- ğŸ” ê´€ë¦¬ì ê¸°ëŠ¥ (ê¶Œí•œì— ë”°ë¥¸ ë¦¬ë·° ì‚­ì œ ë° ìœ ì € ê´€ë¦¬)

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ
### âœ… í”„ë¡ íŠ¸ì—”ë“œ
React (Hooks ê¸°ë°˜)

React Router DOM

Fetch API

ê¸°ë³¸ CSS ìŠ¤íƒ€ì¼ë§

## âœ… ë°±ì—”ë“œ
PHP (ì ˆì°¨ì§€í–¥ ìŠ¤íƒ€ì¼)

MySQL (InnoDB)

RESTful API ì„¤ê³„

## âš™ï¸ ì„¤ì¹˜ ë°©ë²•
### ğŸ“¥ ë¦¬í¬ì§€í† ë¦¬ í´ë¡ 
```php
git clone https://github.com/couque0319/reactproject.git
cd reactproject
```

## ğŸ› ï¸ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
'''bash
cd frontend
npm install
npm start
'''

### ğŸ—„ï¸ ë°±ì—”ë“œ ì„¤ì •
- backend/db_connect.php íŒŒì¼ì„ ì—´ì–´ ë³¸ì¸ì˜ DB ì„¤ì •ê°’ì„ ì…ë ¥í•˜ì„¸ìš”.

- MySQLì— backend/README.mdì— í¬í•¨ëœ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆë¥¼ ë°˜ì˜í•˜ì„¸ìš”.

### ğŸ”„ ë¼ìš°íŒ… ì„¤ì • (.htaccess)
- Apache ì‚¬ìš© ì‹œ SPA ë¼ìš°íŒ… ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•œ .htaccess ì„¤ì •ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ğŸ“¡ ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸ (ë°±ì—”ë“œ)
ë©”ì†Œë“œ	ê²½ë¡œ	ì„¤ëª…
| ë©”ì†Œë“œ | ê²½ë¡œ                                 | ì„¤ëª…                 |
| ------ | ------------------------------------ | -------------------- |
| GET    | /api/get_games.php                   | ì „ì²´ ê²Œì„ ëª©ë¡ ì¡°íšŒ  |
| GET    | /api/get_game.php?id=1               | íŠ¹ì • ê²Œì„ ì •ë³´ ì¡°íšŒ  |
| POST   | /api/add_review.php                  | ë¦¬ë·° ì‘ì„±            |
| GET    | /api/get_reviews.php?game_id=1       | ê²Œì„ë³„ ë¦¬ë·° ì¡°íšŒ     |
| POST   | /api/register.php                    | íšŒì›ê°€ì…             |
| POST   | /api/login.php                       | ë¡œê·¸ì¸               |
| GET    | /api/session_status.php              | ë¡œê·¸ì¸ ì„¸ì…˜ í™•ì¸     |

## ğŸ“„ ë¼ì´ì„ ìŠ¤
---
ë³¸ í”„ë¡œì íŠ¸ëŠ” í•™ìŠµ ë° í¬íŠ¸í´ë¦¬ì˜¤ ìš©ë„ë¡œ ììœ ë¡­ê²Œ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.

api key (ì‚­ì œ ì˜ˆì •)

## ğŸ”§ Backend - reactproject
---
React ê¸°ë°˜ ê²Œì„ ë¦¬ë·° í”„ë¡œì íŠ¸ì˜ **ë°±ì—”ë“œ(PHP API)**ì…ë‹ˆë‹¤.

## ë””ë ‰í† ë¦¬êµ¬ì¡°

```php
backend/
â”œâ”€â”€ .htaccess
â”œâ”€â”€ db_connect.php
â”œâ”€â”€ index.html
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ add_review.php
â”‚   â”œâ”€â”€ ask_ai.php
â”‚   â”œâ”€â”€ check_username.php
â”‚   â”œâ”€â”€ db.php
â”‚   â”œâ”€â”€ delete_game.php
â”‚   â”œâ”€â”€ delete_review.php
â”‚   â”œâ”€â”€ get_game.php
â”‚   â”œâ”€â”€ get_games.php
â”‚   â”œâ”€â”€ get_reviews.php
â”‚   â”œâ”€â”€ get_reviews_by_user.php
â”‚   â”œâ”€â”€ get_users.php
â”‚   â”œâ”€â”€ login.php
â”‚   â”œâ”€â”€ logout.php
â”‚   â”œâ”€â”€ register.php
â”‚   â”œâ”€â”€ session_status.php
â”‚   â”œâ”€â”€ signup_manual.php
â”‚   â”œâ”€â”€ update_games.php
â”‚   â”œâ”€â”€ update_user_role.php
â”œâ”€â”€ static/
â”‚   â””â”€â”€ css/
```

## ğŸ“Œ ì£¼ìš” ì„¤ëª…
---
- db_connect.php : DB ì—°ê²° ì„¤ì •
- api/ : ê²Œì„, ìœ ì €, ë¦¬ë·° ê´€ë ¨ API í•¸ë“¤ëŸ¬
- static/css/ : ì •ì  CSS ë¦¬ì†ŒìŠ¤

## ğŸ§© PHP API ì½”ë“œ

### api/add_review.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');
ini_set('display_errors', 1);
error_reporting(E_ALL);

$input = json_decode(file_get_contents("php://input"), true);

$game_id = $input['game_id'] ?? null;
$nickname = $input['nickname'] ?? null;
$rating = $input['rating'] ?? null;
$content = $input['content'] ?? null;

if (!$game_id || !$nickname || !$rating || !$content) {
  echo json_encode(['success' => false, 'message' => 'ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.']);
  exit;
}

$stmt = $pdo->prepare("INSERT INTO game_reviews (game_id, nickname, rating, content) VALUES (?, ?, ?, ?)");
$success = $stmt->execute([$game_id, $nickname, $rating, $content]);

echo json_encode(['success' => $success]);
?>
 ```

### api/ask_ai.php
---

```php
<?php
// ì—ëŸ¬ ì¶œë ¥ ì„¤ì •
ini_set('display_errors', 1);
error_reporting(E_ALL);

header('Content-Type: application/json');

// ì‚¬ìš©ì ì…ë ¥ ë°›ê¸°
$input = json_decode(file_get_contents("php://input"), true);
$question = trim($input['question'] ?? '');

if (!$question) {
  echo json_encode(['error' => 'ì§ˆë¬¸ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.']);
  exit;
}

// âœ… ì—¬ê¸° ë³¸ì¸ì˜ Gemini API í‚¤ ì…ë ¥ (https://aistudio.google.com/app/apikey)
$apiKey = 'AIzaSyCOdZQkwRaVXqgVVwJ4lF_XH_PeNd7Nw_Q';  // â† ë°˜ë“œì‹œ ë³¸ì¸ í‚¤ë¡œ êµì²´

$endpoint = "https://generativelanguage.googleapis.com/v1/models/gemini-1.5-pro-002:generateContent?key=$apiKey";

$data = [
  'contents' => [
    [
      'parts' => [
        ['text' => $question]
      ]
    ]
  ]
];

$ch = curl_init($endpoint);
curl_setopt_array($ch, [
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_POST => true,
  CURLOPT_HTTPHEADER => ['Content-Type: application/json'],
  CURLOPT_POSTFIELDS => json_encode($data)
]);

$response = curl_exec($ch);
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

$result = json_decode($response, true);

// âœ… ì„±ê³µ ì‘ë‹µì¼ ë•Œ
if ($httpCode === 200 && isset($result['candidates'][0]['content']['parts'][0]['text'])) {
  echo json_encode([
    'response' => $result['candidates'][0]['content']['parts'][0]['text']
  ]);
} else {
  echo json_encode([
    'error' => $result['error']['message'] ?? 'Gemini ì‘ë‹µ ì˜¤ë¥˜',
    'httpCode' => $httpCode,
    'raw' => $response // í•„ìš” ì‹œ ì œê±° ê°€ëŠ¥
  ]);
}

```

### api/check_username.php
---

```php
<?php
require_once 'db_connect.php';
header('Content-Type: application/json');

$username = $_GET['username'] ?? '';

if (!$username) {
  echo json_encode(['exists' => false, 'message' => 'ì…ë ¥ ëˆ„ë½']);
  exit;
}

$stmt = $pdo->prepare("SELECT id FROM users WHERE username = ?");
$stmt->execute([$username]);

$exists = $stmt->fetch() !== false;
echo json_encode(['exists' => $exists]);
```

### api/db.php
---

```php
<?php
$host = 'localhost';
$user = 'root';
$password = '';
$dbname = 'metacritic';

$conn = new mysqli($host, $user, $password, $dbname);

if ($conn->connect_error) {
    die(json_encode(['success' => false, 'message' => 'DB ì—°ê²° ì‹¤íŒ¨: ' . $conn->connect_error]));
}
?>
```

### api/delete_game.php
---

```php
<?php
require_once 'db_connect.php';
header('Content-Type: application/json');

$data = json_decode(file_get_contents('php://input'), true);
$id = $data['id'] ?? 0;

if (!$id) {
  echo json_encode(['success' => false, 'message' => 'ê²Œì„ ID ëˆ„ë½']);
  exit;
}

$stmt = $pdo->prepare("DELETE FROM games WHERE id = ?");
$success = $stmt->execute([$id]);

echo json_encode(['success' => $success]);
```

### api/delete_review.php
---

```php
<?php
session_start();
require_once '../db_connect.php';
header('Content-Type: application/json');

$input = json_decode(file_get_contents("php://input"), true);
$review_id = $input['id'] ?? null;
$nickname = $_SESSION['nickname'] ?? null;

if (!$review_id || !$nickname) {
  echo json_encode(['success' => false, 'message' => 'ì¸ì¦ ì‹¤íŒ¨']);
  exit;
}

$stmt = $pdo->prepare("DELETE FROM game_reviews WHERE id = ? AND nickname = ?");
$success = $stmt->execute([$review_id, $nickname]);

echo json_encode(['success' => $success]);
```

### api/get_game.php
---

```php
<?php
require_once(__DIR__ . '/../db_connect.php');
header('Content-Type: application/json');
ini_set('display_errors', 1);
error_reporting(E_ALL);

$id = $_GET['id'] ?? null;
if (!$id) {
  echo json_encode(["error" => "ê²Œì„ ID ëˆ„ë½"]);
  exit;
}

$stmt = $pdo->prepare("SELECT * FROM games WHERE id = ?");
$stmt->execute([$id]);
$game = $stmt->fetch(PDO::FETCH_ASSOC);

if ($game) {
  echo json_encode($game);
} else {
  echo json_encode(["error" => "ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]);
}
```

### api/get_games.php
---

```php
<?php
// ì—ëŸ¬ í‘œì‹œ ì„¤ì • (ê°œë°œí™˜ê²½ìš©)
ini_set('display_errors', 1);
error_reporting(E_ALL);

header('Content-Type: application/json');

// âœ… ì •í™•í•œ ìƒëŒ€ê²½ë¡œë¡œ DB ì—°ê²°
require_once __DIR__ . '/../db_connect.php';

try {
    // ê²Œì„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    $stmt = $pdo->prepare("SELECT id, title, description, image_url, meta_score, user_score FROM games");
    $stmt->execute();
    $games = $stmt->fetchAll(PDO::FETCH_ASSOC);

    // âš ï¸ JSON ë Œë”ë§ ë¶ˆê°€ëŠ¥í•œ í•„ë“œ ì œê±° (ì„ íƒì )
    /*
    foreach ($games as &$game) {
        foreach ($game as $key => $value) {
            if (is_object($value) || is_array($value)) {
                unset($game[$key]);
            }
        }
    }
    */

    echo json_encode($games);
} catch (Exception $e) {
    // â›” JSON ì˜¤ë¥˜ ì‘ë‹µ
    http_response_code(500);
    echo json_encode([
        'error' => 'DB ì˜¤ë¥˜: ' . $e->getMessage()
    ]);
}
```

### api/get_reviews.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');

$game_id = $_GET['game_id'] ?? null;

if (!$game_id) {
  echo json_encode(['error' => 'game_id í•„ìš”']);
  exit;
}

$stmt = $pdo->prepare("SELECT * FROM game_reviews WHERE game_id = ? ORDER BY created_at DESC");
$stmt->execute([$game_id]);

echo json_encode($stmt->fetchAll(PDO::FETCH_ASSOC));
```

### api/get_reviews_by_user.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');

$nickname = $_GET['nickname'] ?? '';

if (!$nickname) {
  echo json_encode(['error' => 'ë‹‰ë„¤ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.']);
  exit;
}

$stmt = $pdo->prepare("
  SELECT r.id, r.rating, r.content, r.created_at, g.title AS game_title
  FROM game_reviews r
  JOIN games g ON r.game_id = g.id
  WHERE r.nickname = ?
  ORDER BY r.created_at DESC
");
$stmt->execute([$nickname]);

echo json_encode($stmt->fetchAll(PDO::FETCH_ASSOC));
```


### api/get_users.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');

$stmt = $pdo->prepare("SELECT id, username, nickname, role FROM users");
$stmt->execute();

$users = $stmt->fetchAll(PDO::FETCH_ASSOC);
echo json_encode($users);
```

### api/login.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');
session_start();

$input = json_decode(file_get_contents('php://input'), true);
$username = $input['username'] ?? '';
$password = $input['password'] ?? '';

$stmt = $pdo->prepare("SELECT * FROM users WHERE username = ?");
$stmt->execute([$username]);
$user = $stmt->fetch(PDO::FETCH_ASSOC);

if ($user && password_verify($password, $user['password'])) {
  $_SESSION['username'] = $user['username'];
  $_SESSION['nickname'] = $user['nickname'];
  $_SESSION['role'] = $user['role'];

  echo json_encode([
    'success' => true,
    'user' => [
      'username' => $user['username'],
      'nickname' => $user['nickname'],
      'role' => $user['role']
    ]
  ]);
} else {
  echo json_encode(['success' => false, 'message' => 'ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.']);
}
```

### api/logout.php
---

```
<?php
session_start();
session_destroy();
echo json_encode(['success' => true]);
```

### api/register.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');
session_start();

$input = json_decode(file_get_contents('php://input'), true);
$username = $input['username'] ?? '';
$password = $input['password'] ?? '';
$nickname = $input['nickname'] ?? '';

if (!$username || !$password || !$nickname) {
  echo json_encode(['success' => false, 'message' => 'ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.']);
  exit;
}

// ì¤‘ë³µ ì²´í¬
$stmt = $pdo->prepare("SELECT * FROM users WHERE username = ?");
$stmt->execute([$username]);
if ($stmt->fetch()) {
  echo json_encode(['success' => false, 'message' => 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.']);
  exit;
}

$hashed = password_hash($password, PASSWORD_DEFAULT);

$stmt = $pdo->prepare("INSERT INTO users (username, password, nickname, role) VALUES (?, ?, ?, 'user')");
$success = $stmt->execute([$username, $hashed, $nickname]);

echo json_encode(['success' => $success]);
```

### api/session_status.php
---

```php
<?php
session_start();
header('Content-Type: application/json');

if (isset($_SESSION['username'])) {
  echo json_encode([
    'loggedIn' => true,
    'username' => $_SESSION['username'],
    'nickname' => $_SESSION['nickname'],
    'role' => $_SESSION['role']
  ]);
} else {
  echo json_encode(['loggedIn' => false]);
}
```

### api/signup_manual.php
---

```php
<?php
require_once __DIR__ . '/../db_connect.php';
header('Content-Type: application/json; charset=utf-8');

$data = json_decode(file_get_contents("php://input"), true);

$email = trim($data['email'] ?? '');
$username = trim($data['username'] ?? '');
$password = trim($data['password'] ?? '');

// ìœ íš¨ì„± ê²€ì‚¬
if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    http_response_code(400);
    echo json_encode(['success' => false, 'message' => 'ìœ íš¨í•œ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤']);
    exit;
}

if (strlen($username) < 4 || strlen($username) > 20) {
    http_response_code(400);
    echo json_encode(['success' => false, 'message' => 'IDëŠ” 4~20ìì—¬ì•¼ í•©ë‹ˆë‹¤']);
    exit;
}

if (strlen($password) < 6) {
    http_response_code(400);
    echo json_encode(['success' => false, 'message' => 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤']);
    exit;
}

// ì¤‘ë³µ ì²´í¬
$stmt = $pdo->prepare("SELECT id FROM users WHERE email = ?");
$stmt->execute([$email]);
if ($stmt->fetch()) {
    http_response_code(409);
    echo json_encode(['success' => false, 'message' => 'ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤']);
    exit;
}

$stmt = $pdo->prepare("SELECT id FROM users WHERE username = ?");
$stmt->execute([$username]);
if ($stmt->fetch()) {
    http_response_code(409);
    echo json_encode(['success' => false, 'message' => 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ IDì…ë‹ˆë‹¤']);
    exit;
}

// ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
$hashed = password_hash($password, PASSWORD_DEFAULT);

// ì €ì¥
$stmt = $pdo->prepare("INSERT INTO users (email, username, password, signup_method, role) VALUES (?, ?, ?, 'manual', 'user')");
$success = $stmt->execute([$email, $username, $hashed]);

echo json_encode(['success' => $success]);
?>
```

### api/update_games.php
---

```php
<?php
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

require_once __DIR__ . '/../db_connect.php';

$apiKey = '672726e2c0b245d99db2592da35bfdc1'; // ğŸ”‘ ì—¬ê¸°ì— ë³¸ì¸ì˜ RAWG API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”
$totalPages = 3; // ìµœëŒ€ 120ê°œ ê²Œì„ ê°€ì ¸ì˜¤ê¸°
$pageSize = 40;

// cURL í•¨ìˆ˜ ì •ì˜
function curl_get($url) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $response = curl_exec($ch);

    if (curl_errno($ch)) {
        echo 'âŒ cURL ì˜¤ë¥˜: ' . curl_error($ch);
        curl_close($ch);
        exit;
    }

    curl_close($ch);
    return $response;
}

for ($page = 1; $page <= $totalPages; $page++) {
    $apiUrl = "https://api.rawg.io/api/games?key={$apiKey}&page={$page}&page_size={$pageSize}";
    $response = curl_get($apiUrl);
    $data = json_decode($response, true);

    if (!isset($data['results'])) {
        echo "âŒ page $page: ì‘ë‹µì— results ì—†ìŒ<br>";
        echo "<pre>"; print_r($data); echo "</pre>";
        continue;
    }

    echo "âœ… page $page: " . count($data['results']) . "ê°œ ìˆ˜ì‹ <br>";

    foreach ($data['results'] as $game) {
        $title = $game['name'];
        $meta_score = $game['metacritic'] ?? null;
        $user_score = $game['rating'] ?? null;
        $image_url = $game['background_image'] ?? 'https://via.placeholder.com/300x160?text=No+Image';

        // ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (description)
        $detailUrl = "https://api.rawg.io/api/games/{$game['id']}?key={$apiKey}";
        $detailData = json_decode(curl_get($detailUrl), true);
        $description = $detailData['description_raw'] ?? '';

        // INSERT ë˜ëŠ” UPDATE
        $stmt = $pdo->prepare("INSERT INTO games (title, description, meta_score, user_score, image_url)
                               VALUES (?, ?, ?, ?, ?)
                               ON DUPLICATE KEY UPDATE
                               description = VALUES(description),
                               meta_score = VALUES(meta_score),
                               user_score = VALUES(user_score),
                               image_url = VALUES(image_url)");

        if ($stmt->execute([$title, $description, $meta_score, $user_score, $image_url])) {
            echo "âœ… ì €ì¥ë¨: $title<br>";
        } else {
            echo "âŒ ì €ì¥ ì‹¤íŒ¨: $title<br>";
        }
    }

    echo "<hr>";
}

echo "<br>ğŸ‰ ì „ì²´ ì™„ë£Œ!";
?>
```

### api/update_user_role.php
---

```php
<?php
require_once '../db_connect.php';
header('Content-Type: application/json');
ini_set('display_errors', 1);
error_reporting(E_ALL);

$input = json_decode(file_get_contents("php://input"), true);

$id = isset($input['id']) ? (int)$input['id'] : null;
$role = isset($input['role']) ? trim($input['role']) : null;

// ì •í™•í•˜ê²Œ ìœ íš¨ì„± ì²´í¬
if ($id === null || $id <= 0 || !$role || !in_array($role, ['user', 'admin'])) {
  echo json_encode([
    'success' => false,
    'message' => "ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤",
    'debug' => ['id' => $id, 'role' => $role]
  ]);
  exit;
}

try {
  $stmt = $pdo->prepare("UPDATE users SET role = ? WHERE id = ?");
  $success = $stmt->execute([$role, $id]);

  echo json_encode([
    'success' => $success,
    'message' => $success ? 'ê¶Œí•œ ë³€ê²½ ì„±ê³µ' : 'ì¿¼ë¦¬ ì‹¤íŒ¨',
    'debug' => ['id' => $id, 'role' => $role]
  ]);
} catch (PDOException $e) {
  echo json_encode([
    'success' => false,
    'message' => 'ì¿¼ë¦¬ ì˜¤ë¥˜: ' . $e->getMessage()
  ]);
}
```

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (db/schema.sql)
---

### games í…Œì´ë¸”
```php
CREATE TABLE `games` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `description` text,
  `meta_score` int(11) DEFAULT NULL,
  `user_score` float DEFAULT NULL,
  `release_date` date DEFAULT NULL,
  `image_url` text,
  PRIMARY KEY (`id`),
  KEY `title` (`title`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### game_reviews í…Œì´ë¸”
---

```php
CREATE TABLE `game_reviews` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `game_id` int(11) NOT NULL,
  `nickname` varchar(100) DEFAULT NULL,
  `rating` float DEFAULT NULL,
  `content` text,
  `created_at` datetime DEFAULT current_timestamp(),
  PRIMARY KEY (`id`),
  KEY `game_id` (`game_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### users í…Œì´ë¸”
---

```php
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(100) NOT NULL,
  `password` varchar(255) DEFAULT NULL,
  `signup_method` varchar(50) NOT NULL DEFAULT 'manual',
  `created_at` datetime DEFAULT current_timestamp(),
  `role` enum('user','admin') NOT NULL DEFAULT 'user',
  `nickname` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
```

### tasks.json

```php
{
    "version": "2.0.0",
    "tasks" : [
        {
            "label": "Run PHP",
            "type": "shell",
            "command": "ê²½ë¡œ",
            "args": [
                "${file}"
            ],
            "group": {
                "kind": "build",
                "inDefault": true
            },
            "problemMatcher": []
        }
    ]
}
```
---

## ğŸ“¦ Frontend - reactproject
---
### React ê¸°ë°˜ ê²Œì„ ë¦¬ë·° í”„ë¡œì íŠ¸ì˜ í”„ë¡ íŠ¸ì—”ë“œì…ë‹ˆë‹¤.

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```php
---
frontend/
â”œâ”€â”€ copy-to-xampp.js
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ build/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ robots.txt
â”‚   â””â”€â”€ static/
â”‚       â”œâ”€â”€ css/
â”‚       â””â”€â”€ js/
â”œâ”€â”€ node_modules/
```


## ğŸ“Œ ì£¼ìš” ì„¤ëª…
- package.json : í”„ë¡œì íŠ¸ ì˜ì¡´ì„±ê³¼ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ì •ì˜
- build/ : npm run buildë¡œ ìƒì„±ëœ ì •ì  ë¦¬ì†ŒìŠ¤
- .env : í™˜ê²½ ë³€ìˆ˜ ì •ì˜ íŒŒì¼
- copy-to-xampp.js : ë¹Œë“œ ê²°ê³¼ë¬¼ì„ XAMPPë¡œ ë³µì‚¬í•˜ëŠ” ìœ í‹¸

## ğŸ§© JSX íŒŒì¼ ì½”ë“œ
---
### src/components/AIBar/AIBar.jsx
---

```php
import React, { useState } from 'react';
import './AIBar.css';

function AIBar() {
  const [input, setInput] = useState('');
  const [response, setResponse] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!input.trim()) return;

    setLoading(true);
    setResponse('');

    try {
      const res = await fetch('http://localhost/reactproject/api/ask_ai.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ question: input })
      });

      const data = await res.json();
      console.log("Gemini ì‘ë‹µ:", data);

      if (data.response) {
        setResponse(data.response);
      } else if (data.error) {
        setResponse('â— Gemini ì˜¤ë¥˜: ' + data.error);
      } else {
        setResponse('AI ì‘ë‹µ ì˜¤ë¥˜');
      }
    } catch (err) {
      setResponse('ìš”ì²­ ì‹¤íŒ¨: ' + err.message);
    }

    setLoading(false);
    setInput('');
  };

  return (
    <div className={`ai-container ${response ? 'expanded' : ''}`}>
      <form className="ai-bar" onSubmit={handleSubmit}>
        <input
          type="text"
          placeholder="AIì—ê²Œ ë¬¼ì–´ë³´ì„¸ìš”..."
          value={input}
          onChange={(e) => setInput(e.target.value)}
        />
        <button type="submit" disabled={loading}>
          {loading ? '...' : 'â–¶'}
        </button>
      </form>

      {response && (
        <div className="ai-response">
          <strong>AI ì‘ë‹µ:</strong>
          <p>{response}</p>
        </div>
      )}
    </div>
  );
}

export default AIBar;
```

### src/components/Auth/AuthModal.jsx
---

```php
// src/components/Auth/AuthModal.jsx
import React, { useState } from 'react';
import LoginForm from './LoginForm';
import SignupForm from './SignupForm';
import './AuthModal.css';

function AuthModal({ onClose }) {
  const [mode, setMode] = useState('login');

  return (
    <div className="auth-modal-overlay">
      <div className="auth-modal">
        <button className="close-button" onClick={onClose}>Ã—</button>
        {mode === 'login' ? (
          <>
            <h2>ë¡œê·¸ì¸</h2>
            <LoginForm onClose={onClose} />
            <p onClick={() => setMode('signup')}>ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <strong>íšŒì›ê°€ì…</strong></p>
          </>
        ) : (
          <>
            <h2>íšŒì›ê°€ì…</h2>
            <SignupForm onClose={onClose} />
            <p onClick={() => setMode('login')}>ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <strong>ë¡œê·¸ì¸</strong></p>
          </>
        )}
      </div>
    </div>
  );
}

export default AuthModal;
```

### src/components/Auth/LoginForm.jsx
---

```php
import React, { useState } from 'react';

function LoginForm({ onClose }) {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);

  const handleLogin = async () => {
    if (!username || !password) {
      alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      return;
    }

    setLoading(true);
    try {
      const res = await fetch('/reactproject/api/login.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      const data = await res.json();
      if (data.success) {
       alert('ë¡œê·¸ì¸ ì„±ê³µ');
        onClose();
        setTimeout(() => {
        window.location.reload();
    }, 100); // ì§§ì€ ì§€ì—°ìœ¼ë¡œ ëª¨ë‹¬ ì •ìƒ ë‹«í˜

      } else {
        alert(data.message || 'ë¡œê·¸ì¸ ì‹¤íŒ¨');
      }
    } catch (err) {
      alert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="auth-form">
      <input
        type="text"
        placeholder="ì•„ì´ë””"
        value={username}
        onChange={(e) => setUsername(e.target.value)}
        className="auth-input"
      />
      <input
        type="password"
        placeholder="ë¹„ë°€ë²ˆí˜¸"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        className="auth-input"
      />
      <button onClick={handleLogin} className="auth-button" disabled={loading}>
        {loading ? 'ì²˜ë¦¬ ì¤‘...' : 'ë¡œê·¸ì¸'}
      </button>
    </div>
  );
}

export default LoginForm;
```

### src/components/Auth/SignupForm.jsx

```php
// SignupForm.jsx
import React, { useState } from 'react';

function SignupForm({ onClose }) {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [nickname, setNickname] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSignup = async () => {
    if (!username || !password || !nickname) {
      alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      return;
    }

    setLoading(true);
    try {
      const res = await fetch('/reactproject/api/register.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password, nickname })
      });

      const data = await res.json();
      if (data.success) {
        alert('âœ… íšŒì›ê°€ì… ì™„ë£Œ! ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
        onClose();
      } else {
        alert(data.message || 'âŒ íšŒì›ê°€ì… ì‹¤íŒ¨');
      }
    } catch (error) {
      alert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="auth-form">
      <input
        type="text"
        placeholder="ì•„ì´ë””"
        value={username}
        onChange={(e) => setUsername(e.target.value)}
        className="auth-input"
      />
      <input
        type="text"
        placeholder="ë‹‰ë„¤ì„"
        value={nickname}
        onChange={(e) => setNickname(e.target.value)}
        className="auth-input"
      />
      <input
        type="password"
        placeholder="ë¹„ë°€ë²ˆí˜¸"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        className="auth-input"
      />
      <button onClick={handleSignup} className="auth-button" disabled={loading}>
        {loading ? 'ì²˜ë¦¬ ì¤‘...' : 'íšŒì›ê°€ì…'}
      </button>
    </div>
  );
}

export default SignupForm;
```

### src/components/GameCard/GameCard.jsx
---

```php
// GameCard.jsx
import React from 'react';
import './GameCard.css';
import { Link } from 'react-router-dom';

function getScoreClass(score) {
  if (score >= 75) return 'high';
  if (score >= 50) return 'mid';
  return 'low';
}

function GameCard({ game }) {
  // ì•ˆì „í•˜ê²Œ ë°ì´í„° fallback ì„¤ì •
  const title = typeof game.title === 'string' ? game.title : 'ì œëª© ì—†ìŒ';
  const description = typeof game.description === 'string' ? game.description.slice(0, 100) + '...' : 'ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.';
  const metaScore = typeof game.meta_score === 'number' ? game.meta_score : 'N/A';
  const userScore = typeof game.user_score === 'number' ? game.user_score : 'N/A';

  return (
    <div className="game-card">
      <Link to={`/games/${game.id}`} className="game-link">
        {game.image_url ? (
          <img
            src={game.image_url}
            alt={title}
            className="game-image"
            onError={(e) => (e.target.style.display = 'none')}
          />
        ) : (
          <div style={{ height: '200px', background: '#444' }}>ì´ë¯¸ì§€ ì—†ìŒ</div>
        )}
        <h3 className="game-title">{title}</h3>
      </Link>

      <p className="description">{description}</p>
      <p className="meta-score" data-score={getScoreClass(game.meta_score)}>
        ë©”íƒ€ ì ìˆ˜: {metaScore}
      </p>
      <p className="user-score">
        ìœ ì € ì ìˆ˜: {userScore}
      </p>
    </div>
  );
}

export default GameCard;
```

### src/components/Header/Header.jsx
---

```php
import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import './Header.css';

function Header({ onLoginClick }) {
  const [user, setUser] = useState(null);

  useEffect(() => {
    fetch('/reactproject/api/session_status.php', {
      credentials: 'include'
    })
      .then(res => res.json())
      .then(data => {
      console.log("session_status ì‘ë‹µ:", data);
      if (data.loggedIn) {
       // user ê´€ë ¨ ì •ë³´ë§Œ ë”°ë¡œ ì €ì¥
       setUser({ username: data.username, role: data.role });
     }
    });
  }, []);

  const handleLogout = () => {
    fetch('/reactproject/api/logout.php', {
      credentials: 'include'
    }).then(() => {
      setUser(null);
      window.location.reload();
    });
  };

  return (
    <header className="header">
      <div className="header-inner">
        <div className="logo">
          <Link to="/">
            <span role="img" aria-label="controller">ğŸ®</span> <strong>GameReview Hub</strong>
          </Link>
        </div>

        <nav className="nav-menu">
          <Link to="/">Home</Link>
          <Link to="/games">Games</Link>
          {user?.role === 'admin' && <Link to="/admin">Admin</Link>}

          {user ? (
            <>
              <span className="username">ğŸ‘¤ {user.nickname}</span>
              <Link to="/profile">
                <button className="header-button">Profile</button>
              </Link>
              <button className="header-button" onClick={handleLogout}>Logout</button>
            </>
          ) : (
            <button className="header-button" onClick={onLoginClick}>Register</button>
          )}
        </nav>
      </div>
    </header>
  );
}

export default Header;
```

### src/components/Review/ReviewForm.jsx
---

```php
// ReviewForm.jsx
import React, { useEffect, useState } from 'react';
import './ReviewForm.css';

function ReviewForm({ gameId, onReviewAdded }) {
  const [nickname, setNickname] = useState('');
  const [rating, setRating] = useState('');
  const [content, setContent] = useState('');
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  useEffect(() => {
    fetch('/reactproject/api/session_status.php', {
      credentials: 'include'
    })
      .then(res => res.json())
      .then(data => {
        setIsLoggedIn(data.loggedIn);
        if (data.loggedIn) {
          setNickname(data.nickname);  // âœ… ì •í™•íˆ nickname ì‚¬ìš©
        }
      });
  }, []);

  const handleSubmit = async (e) => {
    e.preventDefault();

    if (!isLoggedIn) {
      alert("ë¡œê·¸ì¸ í›„ ì´ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
      window.dispatchEvent(new Event('open-auth-modal'));
      return;
    }

    const res = await fetch('/reactproject/api/add_review.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify({ game_id: gameId, nickname, rating, content })
    });

    const result = await res.json();
    if (result.success) {
      setRating('');
      setContent('');
      onReviewAdded();  // ë¦¬ë·° ëª©ë¡ ê°±ì‹ 
    } else {
      alert('ë¦¬ë·° ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    }
  };

  return (
    <form onSubmit={handleSubmit} className="review-form">
      <input type="text" placeholder="ë‹‰ë„¤ì„" value={nickname} disabled />
      <input
        type="number"
        placeholder="í‰ì  (0~10)"
        value={rating}
        onChange={(e) => setRating(e.target.value)}
        required
        min="0"
        max="10"
      />
      <textarea
        placeholder="ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ì„¸ìš”"
        value={content}
        onChange={(e) => setContent(e.target.value)}
        required
      />
      <button type="submit">ë¦¬ë·° ë“±ë¡</button>
    </form>
  );
}

export default ReviewForm;
```

### src/components/Review/ReviewList.jsx
---

```php
// ReviewList.jsx
import React, { useEffect, useState } from 'react';
import './ReviewList.css';

function ReviewList({ gameId }) {
  const [reviews, setReviews] = useState([]);
  const [currentUser, setCurrentUser] = useState('');

  useEffect(() => {
    fetch(`/reactproject/api/get_reviews.php?game_id=${gameId}`)
      .then(res => res.json())
      .then(setReviews);

    fetch('/reactproject/api/session_status.php', {
      credentials: 'include'
    })
      .then(res => res.json())
      .then(data => {
        if (data.loggedIn) {
          setCurrentUser(data.nickname);
        }
      });
  }, [gameId]);

  const handleDelete = (id) => {
    if (!window.confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

    fetch('/reactproject/api/delete_review.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: JSON.stringify({ id })
    })
      .then(res => res.json())
      .then(result => {
        if (result.success) {
          setReviews(reviews.filter(r => r.id !== id));
        } else {
          alert('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      });
  };

  if (reviews.length === 0) {
    return <p className="no-review">ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>;
  }

  return (
    <div className="review-list">
      {reviews.map(review => (
        <div key={review.id} className="review-card">
          <div className={`review-score score-${Math.floor(review.rating)}`}>
            {review.rating}
          </div>
          <div className="review-info">
            <div className="review-meta">
              <strong>{review.nickname}</strong>
              <small>{review.created_at}</small>
            </div>
            <p className="review-content">{review.content}</p>
            {currentUser === review.nickname && (
              <div className="review-actions">
                <button onClick={() => handleDelete(review.id)}>ì‚­ì œ</button>
              </div>
            )}
          </div>
        </div>
      ))}
    </div>
  );
}

export default ReviewList;
```

### src/pages/Admin/Admin.jsx
---

```php
// src/pages/Admin.jsx
import React, { useEffect, useState } from 'react';

function Admin() {
  const [users, setUsers] = useState([]);

  useEffect(() => {
    fetch('http://localhost/reactproject/api/get_users.php')
      .then(res => res.json())
      .then(data => setUsers(data));
  }, []);

  const updateRole = (username, newRole) => {
    fetch('http://localhost/reactproject/api/update_user_role.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, role: newRole })
    })
    .then(res => res.json())
    .then(data => alert(data.message));
  };

  const deleteReview = (reviewId) => {
    fetch('http://localhost/reactproject/api/delete_review.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ reviewId })
    })
    .then(res => res.json())
    .then(data => alert(data.message));
  };

  return (
    <div>
      <h2>íšŒì› ê´€ë¦¬</h2>
      <table>
        <thead>
          <tr>
            <th>ì•„ì´ë””</th>
            <th>ê¶Œí•œ</th>
            <th>ê¶Œí•œ ë³€ê²½</th>
          </tr>
        </thead>
        <tbody>
          {users.map(user => (
            <tr key={user.username}>
              <td>{user.username}</td>
              <td>{user.role}</td>
              <td>
                <button onClick={() => updateRole(user.username, 'admin')}>Admin</button>
                <button onClick={() => updateRole(user.username, 'user')}>User</button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}

export default Admin;
```

### src/pages/Admin/AdminPanel.jsx
---

```php
import React, { useEffect, useState } from 'react';
import './AdminPanel.css';

function AdminPanel() {
  const [users, setUsers] = useState([]);
  const [selectedNickname, setSelectedNickname] = useState(null);
  const [userReviews, setUserReviews] = useState([]);

  useEffect(() => {
    fetch('/reactproject/api/get_users.php')
      .then(res => res.json())
      .then(setUsers);
  }, []);

  const changeRole = (userId, newRole) => {
    fetch('/reactproject/api/update_user_role.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ id: userId, role: newRole })
    })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          alert('ê¶Œí•œ ë³€ê²½ ì™„ë£Œ');
          // âœ… ìƒíƒœì—ì„œ í•´ë‹¹ ìœ ì €ì˜ roleë§Œ ì—…ë°ì´íŠ¸
          setUsers(prev =>
            prev.map(u => (u.id === userId ? { ...u, role: newRole } : u))
          );
        } else {
          alert('ë³€ê²½ ì‹¤íŒ¨');
          console.log(data.message);
        }
      });
  };

  const handleUserClick = (nickname) => {
    setSelectedNickname(nickname);
    fetch(`/reactproject/api/get_reviews_by_user.php?nickname=${nickname}`)
      .then(res => res.json())
      .then(setUserReviews);
  };

  const deleteReview = (reviewId) => {
    if (!window.confirm('ì •ë§ë¡œ ì´ ë¦¬ë·°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

    fetch('/reactproject/api/delete_review.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ id: reviewId })
    })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          alert('ë¦¬ë·° ì‚­ì œ ì™„ë£Œ');
          setUserReviews(prev => prev.filter(r => r.id !== reviewId));
        } else {
          alert('ë¦¬ë·° ì‚­ì œ ì‹¤íŒ¨');
        }
      });
  };

  return (
    <div className="admin-container">
      <h2>ğŸ‘‘ ê´€ë¦¬ì íŒ¨ë„</h2>

      <table className="user-table">
        <thead>
          <tr>
            <th>ì•„ì´ë””</th>
            <th>ë‹‰ë„¤ì„</th>
            <th>ê¶Œí•œ</th>
            <th>ê¶Œí•œ ë³€ê²½</th>
          </tr>
        </thead>
        <tbody>
          {users.map(user => (
            <tr key={user.id}>
              <td>{user.username}</td>
              <td>
                <button
                  className="nickname-button"
                  onClick={() => handleUserClick(user.nickname)}
                >
                  {user.nickname}
                </button>
              </td>
              <td>{user.role}</td> {/* âœ… í˜„ì¬ ê¶Œí•œ í‘œì‹œ */}
              <td>
                <button
                  className="role-user"
                  onClick={() => changeRole(user.id, 'user')}
                >
                  user
                </button>
                <button
                  className="role-admin"
                  onClick={() => changeRole(user.id, 'admin')}
                >
                  admin
                </button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>

      {selectedNickname && (
        <>
          <h3>ğŸ“ <span style={{ color: '#0ff' }}>{selectedNickname}</span> ë‹˜ì˜ ë¦¬ë·° ëª©ë¡</h3>
          {userReviews.length === 0 ? (
            <p>ì‘ì„±í•œ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          ) : (
            <div className="review-list">
              {userReviews.map(review => (
                <div className="review-card" key={review.id}>
                  <div className="review-card-header">
                    <div>
                      <p><strong>ê²Œì„:</strong> {review.game_title}</p>
                      <p><strong>í‰ì :</strong> {review.rating}</p>
                    </div>
                    <button
                      className="review-delete-btn"
                      onClick={() => deleteReview(review.id)}
                    >
                      ë¦¬ë·° ì‚­ì œ
                    </button>
                  </div>
                  <p className="review-card-content">{review.content}</p>
                </div>
              ))}
            </div>
          )}
        </>
      )}
    </div>
  );
}

export default AdminPanel;
```

### src/pages/GameDetail/GameDetail.jsx
---

```php
// src/pages/GameDetail/GameDetail.jsx
import React, { useEffect, useState } from 'react';
import { useParams } from 'react-router-dom';
import ReviewList from '../../components/Review/ReviewList';
import ReviewForm from '../../components/Review/ReviewForm';
import './GameDetail.css';

function GameDetail() {
  const { id } = useParams();
  const [game, setGame] = useState(null);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetch(`/reactproject/api/get_game.php?id=${id}`)
      .then(res => {
        if (!res.ok) throw new Error(`HTTP error: ${res.status}`);
        return res.json();
      })
      .then(data => {
        if (data?.error) {
          setError(data.error);
        } else {
          setGame(data);
        }
      })
      .catch(err => {
        console.error('ê²Œì„ ìƒì„¸ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', err);
        setError('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      });
  }, [id]);

  if (error) return <p className="game-detail-wrapper">âš ï¸ {error}</p>;
  if (!game) return <p className="game-detail-wrapper">ë¡œë”© ì¤‘...</p>;

  return (
    <div className="game-detail-wrapper">
      <div className="game-detail">
        <h2>{game.title}</h2>
        <img src={game.image_url} alt={game.title} className="game-detail-image" />
        <p className="description">{game.description}</p>
        <p className="meta-score">ë©”íƒ€ ì ìˆ˜: {game.meta_score}</p>
        <p className="user-score">ìœ ì € ì ìˆ˜: {game.user_score}</p>

        <h3>ë¦¬ë·°</h3>
        <ReviewList gameId={id} />
        <ReviewForm gameId={id} />
      </div>
    </div>
  );
}

export default GameDetail;
```

### src/pages/GameList/GameList.jsx
---

```php
import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import './GameList.css';

function GameList() {
  const [games, setGames] = useState([]);
  const [searchTerm, setSearchTerm] = useState('');

  useEffect(() => {
    fetch('/reactproject/api/get_games.php')
  .then(res => {
    if (!res.ok) throw new Error(`HTTP error: ${res.status}`);
    return res.json();
  })
  .then(data => setGames(data))
  .catch(err => console.error("ê²Œì„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", err));

  }, []);

  const filteredGames = games.filter(game =>
    game.title.toLowerCase().includes(searchTerm.toLowerCase())
  );

  return (
    <main className="game-list-wrapper">
      <h2 className="page-title">ì „ì²´ ê²Œì„ ëª©ë¡</h2>
      <input
        type="text"
        className="search-input"
        placeholder="ê²Œì„ ì œëª© ê²€ìƒ‰..."
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
      />
      <div className="game-horizontal-list">
        {filteredGames.map(game => (
          <Link to={`/games/${game.id}`} key={game.id} className="horizontal-game-card-link">
            <div className="horizontal-game-card">
              <img src={game.image_url} alt={game.title} className="horizontal-game-image" />
              <div className="horizontal-game-info">
                <h3 className="horizontal-game-title">{game.title}</h3>
                <p className="horizontal-description">{game.description?.slice(0, 120)}...</p>
                <p className="meta-score">ë©”íƒ€ ì ìˆ˜: {game.meta_score}</p>
                <p className="user-score">ìœ ì € ì ìˆ˜: {game.user_score}</p>
              </div>
            </div>
          </Link>
        ))}
      </div>
    </main>
  );
}

export default GameList;
```

### src/pages/Home/Home.jsx
---

```php
// src/pages/Home/Home.jsx
import React, { useEffect, useState } from 'react';
import GameCard from '../../components/GameCard/GameCard';
import './Home.css';

function Home() {
  const [games, setGames] = useState([]);

  useEffect(() => {
    fetch('/reactproject/api/get_games.php')
      .then(res => res.json())
      .then(data => {
        console.log("ê²Œì„ ë°ì´í„° ê°œìˆ˜:", data.length);
        console.log("ìƒ˜í”Œ ê²Œì„ êµ¬ì¡°:", data[0]);
        setGames(data);
      })
      .catch(err => console.error("ê²Œì„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜:", err));
  }, []);

  return (
    <main className="home">
      <h2>ìµœì‹  ê²Œì„</h2>
      <div className="game-list">
        {games.map(game => (
          <GameCard key={game.id} game={game} />
        ))}
      </div>
    </main>
  );
}

export default Home;
```

### src/pages/Profile/Profile.jsx
---

```php
// Profile.jsx
import React, { useEffect, useState } from 'react';
import './Profile.css';
import { Link } from 'react-router-dom';

function Profile() {
  const [user, setUser] = useState(null);
  const [reviews, setReviews] = useState([]);

  useEffect(() => {
    fetch('/reactproject/api/session_status.php', {
      credentials: 'include'
    })
      .then(res => res.json())
      .then(data => {
        if (data.loggedIn) {
          setUser(data);

          // ì‚¬ìš©ì ë¦¬ë·° ë¶ˆëŸ¬ì˜¤ê¸°
          fetch(`/reactproject/api/get_reviews_by_user.php?nickname=${data.nickname}`)
            .then(res => res.json())
            .then(setReviews);
        }
      });
  }, []);

  if (!user) return <p>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>;

  return (
    <div className="profile-wrapper">
      <aside className="profile-sidebar">
        <h2>My Profile</h2>
        <nav>
          <ul>
            <li className="active">MY RATINGS & REVIEWS</li>
            <li><Link to="#">MY ACCOUNT</Link></li>
            <li><Link to="#" onClick={() => {
              fetch('/reactproject/api/logout.php', {
                credentials: 'include'
              }).then(() => window.location.href = '/');
            }}>SIGN OUT</Link></li>
          </ul>
        </nav>
      </aside>

      <main className="profile-main">
        <h3>My Ratings & Reviews</h3>
        {reviews.length === 0 ? (
          <p className="no-review">You havenâ€™t rated anything yet</p>
        ) : (
          <ul className="review-list">
            {reviews.map(r => (
              <li key={r.id}>
                <Link to={`/games/${r.game_id}`}>
                  <strong>{r.game_title}</strong> - â­ {r.rating}
                </Link>
                <p>{r.content}</p>
              </li>
            ))}
          </ul>
        )}
      </main>
    </div>
  );
}

export default Profile;
```
